#@ load("@ytt:data", "data")
---
apiVersion: kbld.k14s.io/v1alpha1
kind: Sources
sources:
  - imageRepo: cloudfoundry/cloud-controller-ng
    path: #@ data.values.src_dirs.ccng
  - imageRepo: #@ data.values.kbld.destination.ccng
    path: #@ data.values.src_dirs.ccng
  - imageRepo: cloudfoundry/capi-kpack-watcher
    path: #@ data.values.src_dirs.cf_api_controllers
    pack:
      build:
        builder: gcr.io/paketo-buildpacks/builder:full-cf
  - imageRepo: #@ data.values.kbld.destination.cf_api_controllers
    path: #@ data.values.src_dirs.cf_api_controllers
    pack:
      build:
        builder: gcr.io/paketo-buildpacks/builder:full-cf
---
apiVersion: kbld.k14s.io/v1alpha1
kind: ImageDestinations
destinations:
  - imageRepo: cloudfoundry/cloud-controller-ng
    newImage: #@ data.values.kbld.destination.ccng
  - imageRepo: #@ data.values.kbld.destination.ccng
    newImage: #@ data.values.kbld.destination.ccng
  - imageRepo: cloudfoundry/capi-kpack-watcher
    newImage: #@ data.values.kbld.destination.cf_api_controllers
  - imageRepo: #@ data.values.kbld.destination.cf_api_controllers
    newImage: #@ data.values.kbld.destination.cf_api_controllers
---
apiVersion: kbld.k14s.io/v1alpha1
kind: ImageKeys
keys:
- ccng
- cf_api_controllers
---
apiVersion: kbld.k14s.io/v1alpha1
kind: Config
minimumRequiredVersion: 0.16.0
